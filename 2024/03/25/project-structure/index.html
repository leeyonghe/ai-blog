<p>Stable Diffusion WebUI Docker 프로젝트 구조 상세 설명</p>

<p><img src="https://www.nvidia.com/content/dam/en-zz/Solutions/about-nvidia/logo-and-brand/01-nvidia-logo-vert-500x200-2c50-d@2x.png" alt="NVIDIA Logo" width="500" height="300" /></p>

<p>이 문서에서는 Stable Diffusion WebUI Docker 프로젝트의 모든 폴더와 파일에 대한 상세한 설명을 제공합니다.</p>

<h2 id="1-핵심-디렉토리-구조">1. 핵심 디렉토리 구조</h2>

<h3 id="models">models/</h3>
<p>Stable Diffusion 모델 파일들이 저장되는 핵심 디렉토리입니다.</p>

<h4 id="modelsstable-diffusion">models/Stable-diffusion/</h4>
<ul>
  <li><strong>체크포인트 모델</strong>: <code class="language-plaintext highlighter-rouge">.ckpt</code>, <code class="language-plaintext highlighter-rouge">.safetensors</code> 확장자를 가진 모델 파일들
    <ul>
      <li>기본 모델: <code class="language-plaintext highlighter-rouge">v1-5-pruned.ckpt</code>, <code class="language-plaintext highlighter-rouge">v2-1_768-ema-pruned.safetensors</code> 등</li>
      <li>커스텀 모델: 사용자가 추가한 체크포인트 파일들</li>
    </ul>
  </li>
  <li><strong>VAE 모델</strong>: <code class="language-plaintext highlighter-rouge">vae-ft-mse-840000.pt</code> 등 VAE 관련 파일들</li>
  <li><strong>LoRA 모델</strong>: <code class="language-plaintext highlighter-rouge">.safetensors</code> 확장자를 가진 LoRA 파일들
    <ul>
      <li>각 LoRA 파일은 특정 스타일이나 개념을 학습한 모델</li>
    </ul>
  </li>
</ul>

<h4 id="modelscontrolnet">models/ControlNet/</h4>
<ul>
  <li>ControlNet 모델 파일들</li>
  <li>각 모델은 특정 제어 기능을 담당 (예: pose, depth, canny 등)</li>
</ul>

<h4 id="modelsesrgan">models/ESRGAN/</h4>
<ul>
  <li>이미지 업스케일링을 위한 모델 파일들</li>
  <li><code class="language-plaintext highlighter-rouge">RealESRGAN_x4plus.pth</code> 등</li>
</ul>

<h3 id="outputs">outputs/</h3>
<p>생성된 이미지와 관련 메타데이터가 저장되는 디렉토리입니다.</p>

<h4 id="outputstxt2img-images">outputs/txt2img-images/</h4>
<ul>
  <li>텍스트로 이미지를 생성한 결과물</li>
  <li>각 이미지와 함께 생성 파라미터가 포함된 텍스트 파일</li>
  <li>타임스탬프가 포함된 폴더 구조</li>
</ul>

<h4 id="outputsimg2img-images">outputs/img2img-images/</h4>
<ul>
  <li>이미지 변환 결과물</li>
  <li>원본 이미지와 변환된 이미지 쌍</li>
  <li>변환 파라미터 정보</li>
</ul>

<h4 id="outputsgrids">outputs/grids/</h4>
<ul>
  <li>그리드 형태로 생성된 이미지들</li>
  <li>여러 이미지를 한 번에 비교할 수 있는 결과물</li>
</ul>

<h3 id="extensions">extensions/</h3>
<p>커스텀 확장 기능들이 저장되는 디렉토리입니다.</p>

<h4 id="extensionsinstalled">extensions/installed/</h4>
<ul>
  <li>설치된 확장 기능들의 소스 코드</li>
  <li>각 확장 기능별 독립적인 디렉토리</li>
  <li><code class="language-plaintext highlighter-rouge">requirements.txt</code>와 <code class="language-plaintext highlighter-rouge">install.py</code> 포함</li>
</ul>

<h4 id="extensionsdisabled">extensions/disabled/</h4>
<ul>
  <li>비활성화된 확장 기능들</li>
  <li>필요시 다시 활성화 가능</li>
</ul>

<h3 id="repositories">repositories/</h3>
<p>외부 저장소에서 가져온 코드들이 저장되는 디렉토리입니다.</p>

<h4 id="repositoriesstable-diffusion-stability-ai">repositories/stable-diffusion-stability-ai/</h4>
<ul>
  <li>Stable Diffusion의 핵심 구현체</li>
  <li>모델 아키텍처와 관련 코드</li>
</ul>

<h4 id="repositoriescodeformer">repositories/CodeFormer/</h4>
<ul>
  <li>얼굴 복원을 위한 코드</li>
  <li>모델 가중치와 구현체</li>
</ul>

<h2 id="2-설정-및-스크립트-디렉토리">2. 설정 및 스크립트 디렉토리</h2>

<h3 id="configs">configs/</h3>
<p>설정 파일들이 저장되는 디렉토리입니다.</p>

<h4 id="configsv1-inferenceyaml">configs/v1-inference.yaml</h4>
<ul>
  <li>v1 모델의 기본 설정</li>
  <li>모델 아키텍처 파라미터</li>
</ul>

<h4 id="configsv2-inferenceyaml">configs/v2-inference.yaml</h4>
<ul>
  <li>v2 모델의 기본 설정</li>
  <li>고해상도 생성 관련 설정</li>
</ul>

<h3 id="scripts">scripts/</h3>
<p>실행 스크립트들이 저장되는 디렉토리입니다.</p>

<h4 id="scriptsonload">scripts/onload/</h4>
<ul>
  <li>웹UI 시작 시 자동으로 실행되는 스크립트</li>
  <li>초기 설정 및 환경 구성</li>
</ul>

<h4 id="scriptspostprocessing">scripts/postprocessing/</h4>
<ul>
  <li>이미지 후처리 관련 스크립트</li>
  <li>업스케일링, 필터링 등</li>
</ul>

<h3 id="localizations">localizations/</h3>
<p>다국어 지원을 위한 번역 파일들이 저장되는 디렉토리입니다.</p>

<h4 id="localizationskojson">localizations/ko.json</h4>
<ul>
  <li>한국어 번역 파일</li>
  <li>UI 요소들의 번역</li>
</ul>

<h4 id="localizationsenjson">localizations/en.json</h4>
<ul>
  <li>영어 번역 파일</li>
  <li>기본 언어 설정</li>
</ul>

<h2 id="3-웹-인터페이스-관련-디렉토리">3. 웹 인터페이스 관련 디렉토리</h2>

<h3 id="html">html/</h3>
<p>웹 인터페이스의 HTML 파일들이 저장되는 디렉토리입니다.</p>

<h4 id="htmlindexhtml">html/index.html</h4>
<ul>
  <li>메인 웹 인터페이스</li>
  <li>UI 레이아웃 정의</li>
</ul>

<h4 id="htmlextra-networkshtml">html/extra-networks.html</h4>
<ul>
  <li>추가 네트워크 선택 인터페이스</li>
  <li>LoRA, 임베딩 등 선택 UI</li>
</ul>

<h3 id="javascript">javascript/</h3>
<p>웹 인터페이스의 JavaScript 파일들이 저장되는 디렉토리입니다.</p>

<h4 id="javascriptuijs">javascript/ui.js</h4>
<ul>
  <li>UI 상호작용 처리</li>
  <li>이벤트 핸들러</li>
</ul>

<h4 id="javascriptimageviewerjs">javascript/imageviewer.js</h4>
<ul>
  <li>이미지 뷰어 기능</li>
  <li>확대/축소, 회전 등</li>
</ul>

<h2 id="4-주요-설정-파일">4. 주요 설정 파일</h2>

<h3 id="dockerfile">Dockerfile</h3>
<p>Docker 이미지 빌드를 위한 설정 파일입니다.</p>
<ul>
  <li>기본 이미지 설정</li>
  <li>의존성 설치 명령</li>
  <li>환경 변수 설정</li>
  <li>작업 디렉토리 설정</li>
</ul>

<h3 id="docker-composeyml">docker-compose.yml</h3>
<p>Docker 컨테이너 실행을 위한 설정 파일입니다.</p>
<ul>
  <li>서비스 정의</li>
  <li>볼륨 마운트 설정</li>
  <li>포트 매핑</li>
  <li>환경 변수 설정</li>
</ul>

<h3 id="requirementstxt">requirements.txt</h3>
<p>Python 패키지 의존성 목록입니다.</p>
<ul>
  <li>핵심 라이브러리 버전</li>
  <li>선택적 의존성</li>
  <li>호환성 정보</li>
</ul>

<h3 id="webuipy">webui.py</h3>
<p>웹UI 실행을 위한 메인 Python 스크립트입니다.</p>
<ul>
  <li>서버 초기화</li>
  <li>모델 로딩</li>
  <li>API 엔드포인트 정의</li>
  <li>설정 관리</li>
</ul>

<h2 id="5-실행-스크립트">5. 실행 스크립트</h2>

<h3 id="webuish">webui.sh</h3>
<p>Linux/macOS용 실행 스크립트입니다.</p>
<ul>
  <li>환경 변수 설정</li>
  <li>의존성 확인</li>
  <li>Python 가상환경 설정</li>
  <li>서버 시작</li>
</ul>

<h3 id="webuibat">webui.bat</h3>
<p>Windows용 실행 스크립트입니다.</p>
<ul>
  <li>Windows 환경 설정</li>
  <li>경로 설정</li>
  <li>서비스 시작</li>
</ul>

<h3 id="webui-macos-envsh">webui-macos-env.sh</h3>
<p>macOS 환경 설정 스크립트입니다.</p>
<ul>
  <li>macOS 특화 설정</li>
  <li>M1/M2 칩 지원</li>
  <li>환경 변수 설정</li>
</ul>
